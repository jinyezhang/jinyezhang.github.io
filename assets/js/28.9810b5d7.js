(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{425:function(s,t,a){"use strict";a.r(t);var e=a(56),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"process-env-环境变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#process-env-环境变量"}},[s._v("#")]),s._v(" process.env 环境变量")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),a("p",[s._v("在用"),a("code",[s._v("vue")]),s._v("框架时，经常用到两种环境，一种是开发环境，就是本地开发时的环境，一种是生产环境，就是要发布到线上的环境。")]),s._v(" "),a("p",[s._v("平时开发是用生产环境的，如果发布到线上时，需要切换环境为线上。如果人为去切换也是可以的，但是会容易忘记，可以通过配置不同的运行命令来自动切换环境。")])]),s._v(" "),a("h2",{attrs:{id:"配置环境的实现原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置环境的实现原理"}},[s._v("#")]),s._v(" 配置环境的实现原理")]),s._v(" "),a("p",[s._v("实现原理就是采用"),a("code",[s._v("node.js")]),s._v("顶层对象中的"),a("code",[s._v("process.env")]),s._v("（进程环境，返回一个包含用户环境信息的对象）属性，根据各个环境的配置文件区分和切换环境")]),s._v(" "),a("h2",{attrs:{id:"具体实例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#具体实例"}},[s._v("#")]),s._v(" 具体实例")]),s._v(" "),a("h4",{attrs:{id:"_1-安装依赖"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-安装依赖"}},[s._v("#")]),s._v(" 1. 安装依赖")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[s._v("npm install process\n")])])]),a("h4",{attrs:{id:"_2-创建-env-dev-和-env-prod两个文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-创建-env-dev-和-env-prod两个文件"}},[s._v("#")]),s._v(" 2.创建"),a("code",[s._v(".env.dev")]),s._v(" 和"),a("code",[s._v(".env.prod")]),s._v("两个文件")]),s._v(" "),a("p",[s._v("注意文件要创建在根目录下面")]),s._v(" "),a("p",[a("code",[s._v(".env.dev")]),s._v("文件内容如下：")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NODE_ENV")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"development"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("VUE_APP_TITLE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"development"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* 请求接口地址 */")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("VUE_APP_INTERFACE_URL")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://xxx"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* proxy代理地址 */")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("VUE_APP_PROXYURL")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://xxx"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[a("code",[s._v(".env.prod")]),s._v("文件内容如下：")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NODE_ENV")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"production"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("VUE_APP_TITLE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"prod"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* 请求接口地址 */")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("VUE_APP_INTERFACE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://xxx"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h4",{attrs:{id:"_3-设置项目启动时默认的环境"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-设置项目启动时默认的环境"}},[s._v("#")]),s._v(" 3.设置项目启动时默认的环境")]),s._v(" "),a("p",[s._v("只需要在项目启动命令后面修改需要的环境就行了，例如"),a("code",[s._v("npm run dev")]),s._v("，把"),a("code",[s._v("--mode dev")]),s._v("改为"),a("code",[s._v("--mode prod")]),s._v("就变成了开发环境")]),s._v(" "),a("p",[a("code",[s._v("package.json")]),s._v("部分内容如下：")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v('"scripts"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v('"dev"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"vue-cli-service serve --mode dev"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v('"prod"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"vue-cli-service serve --mode prod"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h4",{attrs:{id:"_4-查看环境是否配置成功"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-查看环境是否配置成功"}},[s._v("#")]),s._v(" 4.查看环境是否配置成功")]),s._v(" "),a("p",[s._v("在"),a("code",[s._v("main.js")]),s._v("文件中打印当前环境，输出就成功了\n"),a("code",[s._v("console.log(process.env.NODE_ENV)")])])])}),[],!1,null,null,null);t.default=n.exports}}]);