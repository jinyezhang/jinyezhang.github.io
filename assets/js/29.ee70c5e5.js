(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{426:function(s,t,a){"use strict";a.r(t);var e=a(56),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"webpack-热更新"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#webpack-热更新"}},[s._v("#")]),s._v(" webpack 热更新")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),a("p",[s._v("昨天看到公司有前端同事在研究"),a("code",[s._v("webpack")]),s._v("，今天有空正好找下资料也"),a("code",[s._v("look look")])]),s._v(" "),a("p",[s._v("我最早接触"),a("code",[s._v("webpack")]),s._v("是 2019 年 6 月-7 月之间，当时对前端还是很模糊的，很多东西都是听过课程，但是由于没有实践经验，所以很多东西都没有深入研究。现在一看，果然啥也不会了……哭死")])]),s._v(" "),a("p",[s._v("查询了资料，找到一个可行的，现在记录如下：")]),s._v(" "),a("h2",{attrs:{id:"_1-目录结构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-目录结构"}},[s._v("#")]),s._v(" 1.目录结构")]),s._v(" "),a("ol",[a("li",[s._v("在文件夹中创建 3 个文件夹，分别是："),a("code",[s._v("src")]),s._v(" "),a("code",[s._v("dist")]),s._v(" "),a("code",[s._v("config")])]),s._v(" "),a("li",[s._v("在"),a("code",[s._v("src")]),s._v("文件夹中创建一个"),a("code",[s._v("main.js")])]),s._v(" "),a("li",[s._v("在"),a("code",[s._v("dist")]),s._v("文件夹中创建一个"),a("code",[s._v("index.html")])]),s._v(" "),a("li",[s._v("在"),a("code",[s._v("config")]),s._v("文件夹中创建一个"),a("code",[s._v("webpack.dev.js")])]),s._v(" "),a("li",[s._v("在根目录文件夹中，输入"),a("code",[s._v("npm init -y")]),s._v(",系统会生成一个"),a("code",[s._v("package.json")]),s._v(",并且有相关的一些配置内容")]),s._v(" "),a("li",[s._v("使用命令行，输入"),a("code",[s._v("git init")]),s._v("，系统会生成一个"),a("code",[s._v("git")]),s._v("文件夹，该文件是隐藏不可见的")])]),s._v(" "),a("h2",{attrs:{id:"_2-全局安装-webpack-webpack-cli-webpack-dev-server"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-全局安装-webpack-webpack-cli-webpack-dev-server"}},[s._v("#")]),s._v(" 2.全局安装 "),a("code",[s._v("webpack")]),s._v(" "),a("code",[s._v("webpack-cli")]),s._v(" "),a("code",[s._v("webpack-dev-server")])]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[s._v("npm install webpack webpack-cli webpack-dev-server -g\n")])])]),a("p",[s._v("注意：")]),s._v(" "),a("ol",[a("li",[a("code",[s._v("-g")]),s._v(" 就是全局安装")]),s._v(" "),a("li",[s._v("安装完一定要注意版本号，我在安装的时候就出现了各种报错问题，根本原因就是版本不兼容")])]),s._v(" "),a("h2",{attrs:{id:"_3-查看webpack的版本-处理兼容问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-查看webpack的版本-处理兼容问题"}},[s._v("#")]),s._v(" 3.查看"),a("code",[s._v("webpack")]),s._v("的版本——处理兼容问题")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[s._v("webpack -v\n")])])]),a("p",[s._v("输入"),a("code",[s._v("webpack -v")]),s._v("可以查看到"),a("code",[s._v("webpack")]),s._v(" "),a("code",[s._v("webpack-cli")]),s._v(" "),a("code",[s._v("webpack-dev-server")]),s._v("的版本号\n"),a("img",{attrs:{src:"https://img-blog.csdnimg.cn/20210701141807223.png",alt:"在这里插入图片描述"}}),s._v("\n注意："),a("code",[s._v("webpack-cli")]),s._v("需要使用"),a("code",[s._v("3.3.12")]),s._v("版本的，所以需要重新安装低版本的"),a("code",[s._v("webpack-cli")]),s._v(" "),a("img",{attrs:{src:"https://img-blog.csdnimg.cn/20210701141718343.png",alt:"在这里插入图片描述"}}),s._v("\n安装完成后，对应的"),a("code",[s._v("package.json")]),s._v("文件中也会有相应的改变：\n"),a("img",{attrs:{src:"https://img-blog.csdnimg.cn/20210701142121344.png",alt:"在这里插入图片描述"}})]),s._v(" "),a("h2",{attrs:{id:"_4-配置webpack-dev-js文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-配置webpack-dev-js文件"}},[s._v("#")]),s._v(" 4.配置"),a("code",[s._v("webpack.dev.js")]),s._v("文件")]),s._v(" "),a("p",[s._v("配置"),a("code",[s._v("config")]),s._v("文件夹中的"),a("code",[s._v("webpack.dev.js")]),s._v("文件，定义入口文件为"),a("code",[s._v("main.js")]),s._v("，打包环境为开发环境"),a("code",[s._v("development")]),s._v("，出口文件为"),a("code",[s._v("dist")]),s._v("文件夹，如下示例：")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" path "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"path"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//这里引入node的path模块")]),s._v("\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//入口文件可以有多个，多个的时候用数组的形式写")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("entry")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("main")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./src/main.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//这里定义main.js为入口文件")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//打包环境，开发/生产")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("mode")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"development"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//打包环境为：生产环境")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//出口，只能由一个")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("output")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("filename")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"[name]-bundle.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//打包后的文件名称，[name]是根据打包的文件名自己生成的，后面的-bundle是写死的")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("path")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"../dist"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//dist文件夹")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("publicPath")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//公开路径")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//配置本地服务器")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("devServer")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("contentBass")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dist"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//指定一个本地服务器路径，否则会默认为根目录")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br")])]),a("h2",{attrs:{id:"_5-修改package-json文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-修改package-json文件"}},[s._v("#")]),s._v(" 5.修改"),a("code",[s._v("package.json")]),s._v("文件")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v('"scripts"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v('"test"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"echo \\"Error: no test specified\\" && exit 1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v('"build"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"webpack --mode production"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v('"dev"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"webpack --mode development"')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("然后执行"),a("code",[s._v("npm run build")]),s._v("操作")]),s._v(" "),a("p",[s._v("此时并没有在"),a("code",[s._v("dist")]),s._v("文件夹中生成"),a("code",[s._v("main.js")]),s._v("文件，而且控制台报错如下：\n"),a("img",{attrs:{src:"https://img-blog.csdnimg.cn/20210701145713127.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llaGFvY2hlbmc1MjA=,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"}}),s._v("\n百度后发现解决方法如下：")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[s._v("webpack ./src/main.js -o ./dist\n")])])]),a("p",[a("img",{attrs:{src:"https://img-blog.csdnimg.cn/20210701145800850.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llaGFvY2hlbmc1MjA=,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"}}),s._v("\n此时发现"),a("code",[s._v("dist")]),s._v("文件夹中出现了一个"),a("code",[s._v("main.js")]),s._v("文件，然后在"),a("code",[s._v("index.html")]),s._v("文件中引入"),a("code",[s._v("main.js")]),s._v("文件\n"),a("img",{attrs:{src:"https://img-blog.csdnimg.cn/20210701145851710.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llaGFvY2hlbmc1MjA=,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"}}),s._v("\n在"),a("code",[s._v("index.html")]),s._v("文件中，右击选择"),a("code",[s._v("open with live server")]),s._v("即可打开此文件\n"),a("img",{attrs:{src:"https://img-blog.csdnimg.cn/20210701150008715.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3llaGFvY2hlbmc1MjA=,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"}}),s._v("\n此时，在"),a("code",[s._v("main.js")]),s._v("文件中添加内容，然后保存，发现打开的页面控制台中有打印相应的内容。")]),s._v(" "),a("p",[s._v("此时改变"),a("code",[s._v("src")]),s._v("中的"),a("code",[s._v("main.js")]),s._v("文件，还是需要执行一下"),a("code",[s._v("webpack ./src/main.js -o ./dist")]),s._v("这个命令才可以。感觉这样并不是完全的热更新。\n如果有大神知道问题出在哪里，可以告知我。谢谢。")])])}),[],!1,null,null,null);t.default=n.exports}}]);